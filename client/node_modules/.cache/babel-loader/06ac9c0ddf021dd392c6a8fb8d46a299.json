{"ast":null,"code":"'use strict';\n\nvar CastError = require('../error/cast');\n/*!\n * Given a value, cast it to a string, or throw a `CastError` if the value\n * cannot be casted. `null` and `undefined` are considered valid.\n *\n * @param {Any} value\n * @param {String} [path] optional the path to set on the CastError\n * @return {string|null|undefined}\n * @throws {CastError}\n * @api private\n */\n\n\nmodule.exports = function castString(value, path) {\n  // If null or undefined\n  if (value == null) {\n    return value;\n  } // handle documents being passed\n\n\n  if (value._id && typeof value._id === 'string') {\n    return value._id;\n  } // Re: gh-647 and gh-3030, we're ok with casting using `toString()`\n  // **unless** its the default Object.toString, because \"[object Object]\"\n  // doesn't really qualify as useful data\n\n\n  if (value.toString && value.toString !== Object.prototype.toString && !Array.isArray(value)) {\n    return value.toString();\n  }\n\n  throw new CastError('string', value, path);\n};","map":null,"metadata":{},"sourceType":"script"}