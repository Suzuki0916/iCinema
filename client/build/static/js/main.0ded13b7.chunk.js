(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{120:function(e,t,a){e.exports=a(256)},125:function(e,t,a){},144:function(e,t){},146:function(e,t){},180:function(e,t){},181:function(e,t){},253:function(e,t,a){},256:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(117),c=a.n(l),i=(a(125),a(8)),o=a(9),s=a(11),u=a(10),m=a(12),d=a(261),b=a(257),h=a(260),f=a(31),v=a(34),p=a(119),g=a(30),E=a.n(g),y=[{_id:"5b21ca3eeb7f6fbccd471818",name:"Action"},{_id:"5b21ca3eeb7f6fbccd471814",name:"Comedy"},{_id:"5b21ca3eeb7f6fbccd471820",name:"Thriller"}];function k(){return y.filter(function(e){return e})}var S=[{_id:"5b21ca3eeb7f6fbccd471815",title:"Terminator",genre:{_id:"5b21ca3eeb7f6fbccd471818",name:"Action"},numberInStock:6,dailyRentalRate:2.5,publishDate:"2018-01-03T19:04:28.809Z",liked:!1},{_id:"5b21ca3eeb7f6fbccd471816",title:"Die Hard",genre:{_id:"5b21ca3eeb7f6fbccd471818",name:"Action"},numberInStock:5,dailyRentalRate:2.5,liked:!1},{_id:"5b21ca3eeb7f6fbccd471817",title:"Get Out",genre:{_id:"5b21ca3eeb7f6fbccd471820",name:"Thriller"},numberInStock:8,dailyRentalRate:3.5,liked:!1},{_id:"5b21ca3eeb7f6fbccd471819",title:"Trip to Italy",genre:{_id:"5b21ca3eeb7f6fbccd471814",name:"Comedy"},numberInStock:7,dailyRentalRate:3.5,liked:!1},{_id:"5b21ca3eeb7f6fbccd47181a",title:"Airplane",genre:{_id:"5b21ca3eeb7f6fbccd471814",name:"Comedy"},numberInStock:7,dailyRentalRate:3.5,liked:!1},{_id:"5b21ca3eeb7f6fbccd47181b",title:"Wedding Crashers",genre:{_id:"5b21ca3eeb7f6fbccd471814",name:"Comedy"},numberInStock:7,dailyRentalRate:3.5,liked:!1},{_id:"5b21ca3eeb7f6fbccd47181e",title:"Gone Girl",genre:{_id:"5b21ca3eeb7f6fbccd471820",name:"Thriller"},numberInStock:7,dailyRentalRate:4.5,liked:!1},{_id:"5b21ca3eeb7f6fbccd47181f",title:"The Sixth Sense",genre:{_id:"5b21ca3eeb7f6fbccd471820",name:"Thriller"},numberInStock:4,dailyRentalRate:3.5,liked:!1},{_id:"5b21ca3eeb7f6fbccd471821",title:"The Avengers",genre:{_id:"5b21ca3eeb7f6fbccd471818",name:"Action"},numberInStock:7,dailyRentalRate:3.5,liked:!1}];var j=function(e){var t=e.itemsCount,a=e.pageSize,n=e.onPageChange,l=e.currentPage,c=Math.ceil(t/a);if(1===c)return null;var i=E.a.range(1,c+1);return r.a.createElement("div",{className:"justify-content-center d-flex"},r.a.createElement("nav",{"aria-label":"Page navigation example"},r.a.createElement("ul",{className:"pagination"},i.map(function(e){return r.a.createElement("li",{className:e===l?"page-item active":"page-item",key:e},r.a.createElement("a",{className:"page-link",onClick:function(){return n(e)}}," ",e," "))}))))};var O=function(e){var t="";return t=e.liked?"fas fa-heart":"far fa-heart",r.a.createElement("i",{onClick:e.onLike,style:{cursor:"pointer"},className:t,"aria-hidden":"true"})},N=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,l=new Array(n),c=0;c<n;c++)l[c]=arguments[c];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(l)))).renderSortIcon=function(e){var t=a.props.sortColumn;return e.path!==t.path?null:"asc"===t.order?r.a.createElement("i",{className:"fa fa-sort-up"}):r.a.createElement("i",{className:"fa fa-sort-down"})},a.raiseSort=function(e){var t=Object(v.a)({},a.props.sortColumn);e===t.path?t.order="asc"===t.order?"desc":"asc":(t.path=e,t.order="asc"),a.props.onSort(t)},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("thead",null,r.a.createElement("tr",null,this.props.columns.map(function(t){return r.a.createElement("th",{className:"clickable",key:t.path||t.key,onClick:function(){return e.raiseSort(t.path)},style:{textAlign:"center"}},t.label,e.renderSortIcon(t))})))}}]),t}(n.Component),C=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).renderCell=function(e,t){return t.content?t.content(e):E.a.get(e,t.path)},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.data,n=t.columns;return r.a.createElement("tbody",null,a.map(function(t){return r.a.createElement("tr",{key:t._id},n.map(function(a){return r.a.createElement("td",{key:a.label},e.renderCell(t,a))}))}))}}]),t}(n.Component),w=a(127),R=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,l=new Array(n),c=0;c<n;c++)l[c]=arguments[c];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(l)))).columns=[{path:"title",label:"Title",content:function(e){return r.a.createElement(w.a,{to:"/movies/".concat(e._id)},e.title)}},{path:"genre.name",label:"Genre"},{path:"numberInStock",label:"Stock"},{path:"dailyRentalRate",label:"Rate"},{label:"Favourite",key:"fav",content:function(e){return r.a.createElement(O,{liked:e.liked,onLike:function(){return a.props.onLike(e)}})}},{label:"Remove",key:"remove",content:function(e){return r.a.createElement("button",{onClick:function(){return a.props.onDelete(e)},className:"btn btn-danger btn-sm"},"Delete")}}],a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.props,t=e.movies,a=e.onSort,n=e.sortColumn;return r.a.createElement("table",{className:"table mb-5"},r.a.createElement(N,{sortColumn:n,columns:this.columns,onSort:a}),r.a.createElement(C,{data:t,columns:this.columns}))}}]),t}(n.Component),I=function(e){var t=e.onGenreChange,a=e.currentGenre,n=e.allGenres,l=e.textProperty,c=e.valueProperty;return r.a.createElement("div",{className:"list-group"},r.a.createElement("li",{key:"allGenres",href:"/",className:_("All",a),onClick:function(){return t("All")}}," All"),n.map(function(e){return r.a.createElement("li",{key:e[c],className:_(e.name,a),onClick:function(){return t(e[l])}},e[l])}))};function _(e,t){return e===t?"list-group-item active":"list-group-item"}I.defaultProps={valueProperty:"_id",textProperty:"name"};var A=I;a(118);var P=function(e){var t=e.onSearch,a=e.name;return r.a.createElement("div",{className:" mb-4"},r.a.createElement("input",{className:"form-control",name:a,onChange:t,type:"text",placeholder:"Search...","aria-label":"Search"}))};var x=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={allMovies:[],genres:[],pageSize:4,currentPage:1,currentGenre:"All",sortColumn:{path:"",order:""},search:"",searchFilter:"title"},a.handleDelete=function(e){var t=a.state.allMovies.filter(function(t){return t._id!==e._id});a.setState({allMovies:t})},a.handlePageChange=function(e){a.setState({currentPage:e})},a.handleLike=function(e){var t=Object(p.a)(a.state.allMovies),n=t.indexOf(e);t[n]=Object(v.a)({},t[n]),t[n].liked=!t[n].liked,a.setState({allMovies:t})},a.handleSort=function(e){a.setState({sortColumn:e})},a.handleGenreChange=function(e){a.setState({currentGenre:e})},a.handleSearch=function(e){var t;a.setState((t={},Object(f.a)(t,e.target.name,e.target.value),Object(f.a)(t,"currentPage",1),t))},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.setState({allMovies:S,genres:k()})}},{key:"render",value:function(){var e,t,a,n=this.state,l=n.allMovies,c=n.currentGenre,i=n.currentPage,o=n.pageSize,s=n.genres,u=n.sortColumn,m=n.search,d=n.searchFilter;m?(t=m,a=d,e=l.filter(function(e){return e[a].toString().toLowerCase().startsWith(t.toString().toLowerCase())})):e=l;var b=function(e,t){return"All"===t?e:e.filter(function(e){return e.genre.name===t})}(e,c),h=function(e,t,a){var n=(t-1)*a;return E()(e).slice(n).take(a).value()}(E.a.orderBy(b,[u.path],[u.order]),i,o),f=e.length;return 0===f?r.a.createElement("p",null,"There are no movies in the database."):r.a.createElement("div",{className:"container py-5"},r.a.createElement("h1",{className:"main-header"},"Welcome to iCinema"),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-2"},r.a.createElement("h4",{className:"text-muted text-left p-1"},"Filters"),r.a.createElement(A,{currentGenre:c,onGenreChange:this.handleGenreChange,allGenres:s}),r.a.createElement(w.a,{to:"/movies/new",className:"btn btn-success btn-block my-2"}," Add Movie ")),r.a.createElement("div",{className:"col-10"},r.a.createElement(P,{name:"search",onSearch:this.handleSearch}),r.a.createElement("p",null,"You have ",f," movies available."),r.a.createElement(R,{onDelete:this.handleDelete,onLike:this.handleLike,movies:h,sortColumn:u,onSort:this.handleSort}),r.a.createElement(j,{itemsCount:b.length,pageSize:this.state.pageSize,onPageChange:this.handlePageChange,currentPage:this.state.currentPage}))))}}]),t}(n.Component),G=function(){return r.a.createElement("h1",null,"Rentals")},D=function(){return r.a.createElement("h1",null,"Customers")},T=function(){return r.a.createElement("h1",null,"Not Found")},M=a(258),F=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("nav",{className:"navbar navbar-expand-lg  navbar-dark bg-dark"},r.a.createElement(w.a,{className:"navbar-brand",to:"/"},"Vidly"),r.a.createElement("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarNav","aria-controls":"navbarNav","aria-expanded":"false","aria-label":"Toggle navigation"},r.a.createElement("span",{className:"navbar-toggler-icon"})),r.a.createElement("div",{className:"collapse navbar-collapse",id:"navbarNav"},r.a.createElement("ul",{className:"navbar-nav"},r.a.createElement("li",{className:"nav-item"},r.a.createElement(M.a,{className:"nav-link",to:"/movies"},"Movies ",r.a.createElement("span",{className:"sr-only"},"(current)"))),r.a.createElement("li",{className:"nav-item"},r.a.createElement(M.a,{className:"nav-link",to:"/customers"},"Customers")),r.a.createElement("li",{className:"nav-item"},r.a.createElement(M.a,{className:"nav-link",to:"/rentals"},"Rentals")),r.a.createElement("li",{className:"nav-item"},r.a.createElement(M.a,{className:"nav-link",to:"/login"},"Login")),r.a.createElement("li",{className:"nav-item"},r.a.createElement(M.a,{className:"nav-link",to:"/resigter"},"Register"))))))},L=function(e){var t,a=e.match,n=e.history;return r.a.createElement("div",null,(t=a.params.id,!S.find(function(e){return e._id===t})&&n.replace("/not-found")),r.a.createElement("h1",null,"Movie Form ",a.params.id," "),r.a.createElement("button",{className:"btn btn-primary",onClick:function(){return n.push("/movies")}},"Save"))},q=a(14),z=a.n(q),B=a(53),W=function(e){var t=e.name,a=e.label,n=e.error,l=Object(B.a)(e,["name","label","error"]);return r.a.createElement("div",{className:"form-group text-left"},r.a.createElement("label",{htmlFor:t}," ",a," "),r.a.createElement("input",Object.assign({},l,{name:t,id:t,className:"form-control"})),n&&r.a.createElement("div",{className:"alert alert-danger"}," ",n," "))},U=function(e){var t=e.name,a=e.label,n=e.options,l=e.error,c=Object(B.a)(e,["name","label","options","error"]);return r.a.createElement("div",{className:"form-group text-left"},r.a.createElement("label",{htmlFor:t}," ",a," "),r.a.createElement("select",Object.assign({name:t,id:t},c,{className:"form-control"}),n.map(function(e){return r.a.createElement("option",{key:e._id,value:e.value},e.name)})),l&&r.a.createElement("div",{className:"alert alert-danger"},l))},$=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={data:{},errors:{}},a.validate=function(e){var t=z.a.validate(a.state.data,a.schema,{abortEarly:!1});if(!t.error)return null;var n={};return t.error.details.forEach(function(e){n[e.path[0]]=e.message}),n},a.validateProperty=function(e){var t=e.name,n=e.value,r=Object(f.a)({},t,n),l=Object(f.a)({},t,a.schema[t]),c=z.a.validate(r,l).error;return c?c.details[0].message:null},a.handleSubmit=function(e){e.preventDefault();var t=a.validate();a.setState({errors:t||{}})},a.handleChange=function(e){var t=e.currentTarget,n=Object(v.a)({},a.state.errors),r=a.validateProperty(t);r?n[t.name]=r:delete n[t.name];var l=Object(v.a)({},a.state.data);l[t.name]=t.value,a.setState({data:l,errors:n})},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"renderInput",value:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"text",n=arguments.length>3?arguments[3]:void 0,l=arguments.length>4&&void 0!==arguments[4]&&arguments[4],c=this.state,i=c.data,o=c.errors;return r.a.createElement(W,{name:e,autoFocus:l,placeholder:n,label:t,type:a,error:o[e],value:i[e],onChange:this.handleChange})}},{key:"renderSubmitButton",value:function(e,t){return r.a.createElement("button",{className:"btn btn-primary",disabled:this.validate(),onClick:t},e)}},{key:"renderSelect",value:function(e,t,a){var n=this.state,l=n.data,c=n.errors;return r.a.createElement(U,{name:e,value:l[e],label:t,options:a,onChange:this.handleChange,error:c[e]})}}]),t}(n.Component),Z=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={data:{username:"",password:""},errors:{}},a.schema={username:z.a.string().required().label("Username"),password:z.a.string().required().regex(/^[a-zA-Z0-9]{8,30}$/).label("Password")},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"container"},r.a.createElement("h1",null,"Login"),r.a.createElement("form",{onSubmit:this.handleSubmit},this.renderInput("username","Username","text","Please enter your username...",!0),this.renderInput("password","Password","password","Please enter your password..."),this.renderSubmitButton("Login")))}}]),t}($),J=(a(253),function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={data:{email:"",password:"",username:""},errors:{}},a.schema={email:z.a.string().email().required().label("Email"),password:z.a.string().regex(/^[a-zA-Z0-9]{8,30}$/).required().label("Password"),username:z.a.string().required().label("username")},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"container"},r.a.createElement("h1",null,"Register Form"),r.a.createElement("form",{onSubmit:this.handleSubmit},this.renderInput("email","Email"),this.renderInput("username","Username"),this.renderInput("password","Password","password"),this.renderSubmitButton("Sign Up")))}}]),t}($)),V=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={data:{title:"",genreID:"",numberInStock:"",dailyRentalRate:""},genres:[],errors:{}},a.schema={id:z.a.string(),title:z.a.string().required().label("Title"),genreID:z.a.string().required().label("Genre"),numberInStock:z.a.number().min(0).required().label("Number In Stocks"),dailyRentalRate:z.a.number().min(0).max(10).required().label("Rate")},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"doSubmit",value:function(){!function(e){var t=S.find(function(t){return t._id===e._id})||{};t.title=e.title,t.genre=y.find(function(t){return t.name===e.genreID}),t.numberInStock=e.numberInStock,t.dailyRentalRate=e.dailyRentalRate,t._id||(t._id=Date.now().toString(),S.push(t))}(this.state.data),console.log("added the movie"),this.props.history.push("/movies")}},{key:"componentDidMount",value:function(){var e=k();this.setState({genres:e})}},{key:"mapToViewModel",value:function(e){return{_id:e._id,genreID:e.genre._id,title:e.title,numberInStock:e.numberInStock,dailyRentalRate:e.dailyRentalRate}}},{key:"render",value:function(){return r.a.createElement("div",{className:"container"},r.a.createElement("h1",null,"Add a new movie"),r.a.createElement("form",{onSubmit:this.handleSubmit},this.renderInput("title","Title"),this.renderSelect("genreID","Genre",this.state.genres),this.renderInput("numberInStock","Number In Stock","number"),this.renderInput("dailyRentalRate","Rate","number"),this.renderSubmitButton("Add Movie")))}}]),t}($);window.$=window.jQuery=a(255);var H=function(e){function t(){return Object(i.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"App"},r.a.createElement(F,null),r.a.createElement(d.a,null,r.a.createElement(b.a,{path:"/login",component:Z}),r.a.createElement(b.a,{path:"/movies/new",component:V}),r.a.createElement(b.a,{path:"/resigter",component:J}),r.a.createElement(b.a,{path:"/movies",exact:!0,component:x}),r.a.createElement(b.a,{path:"/movies/:id",exact:!0,component:L}),r.a.createElement(b.a,{path:"/customers",component:D}),r.a.createElement(b.a,{path:"/rentals",component:G}),r.a.createElement(b.a,{path:"/not-found",component:T}),r.a.createElement(h.a,{exact:!0,from:"/",to:"/movies"}),r.a.createElement(h.a,{to:"not-found"})))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Q=a(259);c.a.render(r.a.createElement(Q.a,null,r.a.createElement(H,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[120,2,1]]]);
//# sourceMappingURL=main.0ded13b7.chunk.js.map